{
    "title": "$:/plugins/oeyoews/neotw-time",
    "description": "Neotw Time",
    "author": "oeyoews",
    "version": "0.0.1",
    "core-version": ">=5.2.5",
    "type": "application/json",
    "plugin-type": "plugin",
    "name": "Neotw Time",
    "dependents": "$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus",
    "list": "readme explore",
    "text": "{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-time/Layout\":{\"title\":\"$:/plugins/oeyoews/neotw-time/Layout\",\"tags\":\"$:/tags/Layout\",\"name\":\"{{$:/plugins/oeyoews/neotw-time/icon}} Neotw Time\",\"description\":\"{{$:/plugins/oeyoews/neotw-time/readme!!description}}\",\"text\":\"\\\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\\n\\n<$vars\\n  tv-config-toolbar-icons={{$:/config/Toolbar/Icons}}\\n  tv-config-toolbar-text={{$:/config/Toolbar/Text}}\\n  tv-config-toolbar-class={{$:/config/Toolbar/ButtonClass}}\\n  tv-enable-drag-and-drop={{$:/config/DragAndDrop/Enable}}\\n  tv-show-missing-links={{$:/config/MissingLinks}}\\n  storyviewTitle={{$:/view}}\\n  languageTitle={{{ [{$:/language}get[name]] }}}>\\n\\n<div class=\\\"prose max-w-none prose-indigo m-auto sm:w-auto md:w-2/3\\\">\\n  {{{ [[$:/plugins/oeyoews/neotw-time/readme]] ||$:/core/ui/ViewTemplate }}}\\n</div>\\n\"},\"$:/plugins/oeyoews/neotw-time/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-time/readme\",\"description\":\"Neotw Time\",\"text\":\"<div class=\\\"prose max-w-none prose-indigo\\\">\\n\\n!! Neotw Time\\n\\n* [[Source|https://github.com/oeyoews/neotw/tree/main/plugins/oeyoews/neotw-time]]\\n* [[Demo|https://oeyoews.github.io/neotw]]\\n\\n!! Examples\\n\\n```\\n<$ostage />\\n<$ostage timestamp='2023-6-1'/>\\n<$ostage timestamp='2022-01-01'/>\\n```\\n\\n<$ostage />\\n\\n<$ostage timestamp='2023-6-1'/>\\n\\n<$ostage timestamp='2022-01-01'/>\\n\\n</div>\\n\"},\"$:/plugins/oeyoews/neotw-time/icon\":{\"title\":\"$:/plugins/oeyoews/neotw-time/icon\",\"text\":\"<svg viewBox=\\\"0 0 398.75 396.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect fill=\\\"#32caf8\\\" height=\\\"335.98\\\" rx=\\\"86.19\\\" width=\\\"386.75\\\" x=\\\"6\\\" y=\\\"54.12\\\"/><path d=\\\"m6.44 157.91h386.75v7h-386.75z\\\" fill=\\\"#00a3eb\\\"/><path d=\\\"m393.19 286.69v28.19a76.32 76.32 0 0 1 -76.1 76.12h-234.54a76.32 76.32 0 0 1 -76.11-76.12v-183.77a75.52 75.52 0 0 1 .88-11.55v155.58a76.32 76.32 0 0 0 76.11 76.11h234.57a76.38 76.38 0 0 0 75.19-64.56z\\\" fill=\\\"#00a3eb\\\"/><ellipse cx=\\\"360.38\\\" cy=\\\"206.85\\\" fill=\\\"#fff\\\" rx=\\\"3.83\\\" ry=\\\"24.95\\\" transform=\\\"matrix(.99983842 -.01797592 .01797592 .99983842 -3.67 6.53)\\\"/><ellipse cx=\\\"361.11\\\" cy=\\\"255.69\\\" fill=\\\"#fff\\\" rx=\\\"3.83\\\" ry=\\\"12.48\\\" transform=\\\"matrix(.99983842 -.01797592 .01797592 .99983842 -4.54 6.53)\\\"/><path d=\\\"m392.75 128.46v22.35h-385.43v-33a75.52 75.52 0 0 0 -.88 11.55v21.47h-.44v-22.37a76.32 76.32 0 0 1 76.1-76.1h234.55a76.32 76.32 0 0 1 76.1 76.1z\\\" fill=\\\"#ffd947\\\"/><path d=\\\"m397.17 132.88v22.35h-1.62a76.39 76.39 0 0 0 -74.48-60.48h-234.55a76.39 76.39 0 0 0 -74.52 60.48h-.3v-33a75.52 75.52 0 0 0 -.88 11.55v21.47h-.44v-22.37a76.32 76.32 0 0 1 76.14-76.11h234.54a76.32 76.32 0 0 1 76.11 76.11z\\\" fill=\\\"#f3a70f\\\"/><path d=\\\"m6 146.58h386.75v12h-386.75z\\\" fill=\\\"#426572\\\"/><path d=\\\"m306.56 396.1h-214.37a92.29 92.29 0 0 1 -92.19-92.19v-163.6a92.29 92.29 0 0 1 92.19-92.19h214.37a92.29 92.29 0 0 1 92.19 92.19v163.6a92.29 92.29 0 0 1 -92.19 92.19zm-214.37-335.98a80.28 80.28 0 0 0 -80.19 80.19v163.6a80.28 80.28 0 0 0 80.19 80.19h214.37a80.28 80.28 0 0 0 80.19-80.19v-163.6a80.28 80.28 0 0 0 -80.19-80.19z\\\" fill=\\\"#426572\\\"/><rect fill=\\\"#32caf8\\\" height=\\\"93.6\\\" rx=\\\"21.19\\\" width=\\\"42.38\\\" x=\\\"94.74\\\" y=\\\"6\\\"/><rect fill=\\\"#32caf8\\\" height=\\\"93.6\\\" rx=\\\"21.19\\\" width=\\\"42.38\\\" x=\\\"254.56\\\" y=\\\"6\\\"/><path d=\\\"m115.93 105.6a27.22 27.22 0 0 1 -27.19-27.19v-51.22a27.19 27.19 0 0 1 54.38 0v51.22a27.22 27.22 0 0 1 -27.19 27.19zm0-93.6a15.21 15.21 0 0 0 -15.19 15.19v51.22a15.19 15.19 0 0 0 30.38 0v-51.22a15.21 15.21 0 0 0 -15.19-15.19z\\\" fill=\\\"#426572\\\"/><path d=\\\"m275.75 105.6a27.22 27.22 0 0 1 -27.19-27.19v-51.22a27.19 27.19 0 1 1 54.38 0v51.22a27.22 27.22 0 0 1 -27.19 27.19zm0-93.6a15.21 15.21 0 0 0 -15.19 15.19v51.22a15.19 15.19 0 1 0 30.38 0v-51.22a15.21 15.21 0 0 0 -15.19-15.19z\\\" fill=\\\"#426572\\\"/><text fill=\\\"#fff\\\" font-family=\\\"Dosis-Bold, Dosis\\\" font-size=\\\"194.07\\\" font-weight=\\\"700\\\" transform=\\\"translate(117.22 325.63)\\\">01</text></svg>\",\"type\":\"image/svg+xml\"},\"$:/plugins/oeyoews/neotw-otime/stage.js\":{\"title\":\"$:/plugins/oeyoews/neotw-otime/stage.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-otime/stage.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nstage widget\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  if (!$tw.browser) return;\\n\\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\\n  const { calculateTimeDiff } = require('./time');\\n\\n  class StageWidget extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n      this.timestamp = null; // 初始设为 null\\n      this.interval = null; // 初始设为 null\\n    }\\n\\n    computeAttributes() {\\n      super.computeAttributes();\\n      this.timestamp = this.getAttribute('timestamp', '2021-12-23');\\n      this.interval = this.getAttribute('interval', 1000);\\n    }\\n\\n    startTimer() {\\n      this.update();\\n      this.timer = setInterval(() => {\\n        this.update();\\n      }, this.interval);\\n    }\\n\\n    update() {\\n      if (!this.domNodes || !this.domNodes[0]) {\\n        clearInterval(this.timer);\\n        return;\\n      }\\n      this.domNodes[0].textContent = calculateTimeDiff(this.timestamp);\\n    }\\n\\n    render(parent, nextSibling) {\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      const gradient = this.hasAttribute('gradient');\\n      const StageNode = $tw.utils.domMaker('div', {\\n        class: 'my-2',\\n        text: calculateTimeDiff(this.timestamp),\\n      });\\n\\n      gradient &&\\n        StageNode.classList.add(\\n          'text-transparent',\\n          'bg-clip-text',\\n          'bg-gradient-to-r',\\n          'from-cyan-400',\\n          'to-purple-400',\\n          'inline',\\n        );\\n\\n      parent.insertBefore(StageNode, nextSibling);\\n      this.domNodes.push(StageNode);\\n\\n      this.startTimer();\\n    }\\n  }\\n\\n  exports['ostage'] = StageWidget;\\n})();\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/neotw-otime/time.js\":{\"title\":\"$:/plugins/oeyoews/neotw-otime/time.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-otime/time.js\\ntype: application/javascript\\nmodule-type: library\\n\\ntime.js\\n\\n\\\\*/\\nfunction calculateTimeDiff(pastDateString) {\\n  const pastDate = new Date(pastDateString);\\n  const currentDate = new Date();\\n\\n  // 验证过去日期是否有效\\n  if (pastDate > currentDate) {\\n    console.error('过去日期无效，不能超过当前时间！');\\n    return;\\n  }\\n\\n  const timeDiff = currentDate.getTime() - pastDate.getTime();\\n\\n  const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));\\n  const hours = Math.floor(\\n    (timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60),\\n  );\\n  const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));\\n  const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);\\n\\n  // console.clear(); ???\\n\\n  const timeStage = `距离 ${pastDate.toLocaleDateString()} 已经过去了 ${days} 天 ${hours} 小时 ${minutes} 分钟 ${seconds} 秒。`;\\n  return timeStage;\\n}\\n\\nmodule.exports = {\\n  calculateTimeDiff,\\n};\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-time/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-time/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-time/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-time widget\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  if (!$tw.browser) return;\\n\\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\\n\\n  class TimeWidget extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n      this.interval = this.getAttribute('interval', 1000);\\n    }\\n\\n    render(parent, nextSibling) {\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      const classNames = this.getAttribute('class', '').split(' ');\\n\\n      const divNode = $tw.utils.domMaker('div', {\\n        class: classNames.join(' '),\\n      });\\n\\n      parent.insertBefore(divNode, nextSibling);\\n      this.domNodes.push(divNode);\\n\\n      this.startTimer();\\n    }\\n\\n    startTimer() {\\n      this.update();\\n      this.timer = setInterval(() => {\\n        this.update();\\n      }, this.interval);\\n    }\\n\\n    update() {\\n      if (!this.domNodes || !this.domNodes[0]) {\\n        clearInterval(this.timer);\\n        return;\\n      }\\n\\n      const now = new Date();\\n      const timeString = now.toLocaleTimeString();\\n      this.domNodes[0].textContent = timeString;\\n    }\\n  }\\n\\n  exports['otime'] = TimeWidget;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"
}