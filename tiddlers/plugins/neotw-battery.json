{
    "title": "$:/plugins/oeyoews/neotw-battery",
    "description": "Neotw Battery",
    "author": "oeyoews",
    "version": "0.0.1",
    "core-version": ">=5.2.5",
    "type": "application/json",
    "plugin-type": "plugin",
    "name": "Neotw Battery",
    "dependents": "$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus",
    "list": "readme explore",
    "text": "{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-battery/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-battery/readme\",\"text\":\"!! Neotw Battery\\n\\n* Show Battery\\n\"},\"$:/plugins/oeyoews/neotw-battery/battery.js\":{\"title\":\"$:/plugins/oeyoews/neotw-battery/battery.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-battery/battery.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-battery widget\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\\n\\n  class BatteryWidget extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n      this.intervalId = null;\\n    }\\n\\n    render(parent, nextSibling) {\\n      if (!$tw.browser) return;\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      const classNames = this.getAttribute('class', '').split(' ');\\n\\n      const divNode = $tw.utils.domMaker('div', {\\n        class: `inline` + classNames.join(' '),\\n        attributes: {\\n          id: 'battery-level',\\n        },\\n      });\\n\\n      parent.insertBefore(divNode, nextSibling);\\n      this.domNodes.push(divNode);\\n\\n      const showBatteryLevel = () => {\\n        navigator.getBattery().then(battery => {\\n          const level = (battery.level * 100).toFixed(0);\\n          const batteryLevelEl = this.domNodes[0];\\n          batteryLevelEl.textContent = level + '%';\\n          console.log('updated');\\n        });\\n      };\\n\\n      showBatteryLevel();\\n      const batteryId = document.getElementById('battery-level');\\n      if (batteryId) {\\n        this.intervalId = setInterval(showBatteryLevel, 60000);\\n      } else {\\n        clearInterval(this.intervalId);\\n      }\\n    }\\n\\n    destroy() {\\n      clearInterval(this.intervalId);\\n      super.destroy();\\n    }\\n  }\\n\\n  exports['battery'] = BatteryWidget;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"
}