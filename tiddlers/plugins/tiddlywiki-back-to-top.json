{
    "title": "$:/plugins/oeyoews/tiddlywiki-back-to-top",
    "description": "Tiddlywiki Back To Top",
    "author": "oeyoews",
    "version": "0.0.4",
    "core-version": ">=5.2.5",
    "type": "application/json",
    "plugin-type": "plugin",
    "name": "Tiddlywiki Back To Top",
    "list": "readme",
    "dependents": "",
    "text": "{\"tiddlers\":{\"nprogress.min.js\":{\"text\":\"!function(n,e){\\\"function\\\"==typeof define&&define.amd?define(e):\\\"object\\\"==typeof exports?module.exports=e():n.NProgress=e()}(this,function(){function n(n,e,t){return e>n?e:n>t?t:n}function e(n){return 100*(-1+n)}function t(n,t,r){var i;return i=\\\"translate3d\\\"===c.positionUsing?{transform:\\\"translate3d(\\\"+e(n)+\\\"%,0,0)\\\"}:\\\"translate\\\"===c.positionUsing?{transform:\\\"translate(\\\"+e(n)+\\\"%,0)\\\"}:{\\\"margin-left\\\":e(n)+\\\"%\\\"},i.transition=\\\"all \\\"+t+\\\"ms \\\"+r,i}function r(n,e){var t=\\\"string\\\"==typeof n?n:o(n);return t.indexOf(\\\" \\\"+e+\\\" \\\")>=0}function i(n,e){var t=o(n),i=t+e;r(t,e)||(n.className=i.substring(1))}function s(n,e){var t,i=o(n);r(n,e)&&(t=i.replace(\\\" \\\"+e+\\\" \\\",\\\" \\\"),n.className=t.substring(1,t.length-1))}function o(n){return(\\\" \\\"+(n.className||\\\"\\\")+\\\" \\\").replace(/\\\\s+/gi,\\\" \\\")}function a(n){n&&n.parentNode&&n.parentNode.removeChild(n)}var u={};u.version=\\\"0.2.0\\\";var c=u.settings={minimum:.08,easing:\\\"ease\\\",positionUsing:\\\"\\\",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role=\\\"bar\\\"]',spinnerSelector:'[role=\\\"spinner\\\"]',parent:\\\"body\\\",template:'<div class=\\\"bar\\\" role=\\\"bar\\\"><div class=\\\"peg\\\"></div></div><div class=\\\"spinner\\\" role=\\\"spinner\\\"><div class=\\\"spinner-icon\\\"></div></div>'};u.configure=function(n){var e,t;for(e in n)t=n[e],void 0!==t&&n.hasOwnProperty(e)&&(c[e]=t);return this},u.status=null,u.set=function(e){var r=u.isStarted();e=n(e,c.minimum,1),u.status=1===e?null:e;var i=u.render(!r),s=i.querySelector(c.barSelector),o=c.speed,a=c.easing;return i.offsetWidth,l(function(n){\\\"\\\"===c.positionUsing&&(c.positionUsing=u.getPositioningCSS()),f(s,t(e,o,a)),1===e?(f(i,{transition:\\\"none\\\",opacity:1}),i.offsetWidth,setTimeout(function(){f(i,{transition:\\\"all \\\"+o+\\\"ms linear\\\",opacity:0}),setTimeout(function(){u.remove(),n()},o)},o)):setTimeout(n,o)}),this},u.isStarted=function(){return\\\"number\\\"==typeof u.status},u.start=function(){u.status||u.set(0);var n=function(){setTimeout(function(){u.status&&(u.trickle(),n())},c.trickleSpeed)};return c.trickle&&n(),this},u.done=function(n){return n||u.status?u.inc(.3+.5*Math.random()).set(1):this},u.inc=function(e){var t=u.status;return t?(\\\"number\\\"!=typeof e&&(e=(1-t)*n(Math.random()*t,.1,.95)),t=n(t+e,0,.994),u.set(t)):u.start()},u.trickle=function(){return u.inc(Math.random()*c.trickleRate)},function(){var n=0,e=0;u.promise=function(t){return t&&\\\"resolved\\\"!==t.state()?(0===e&&u.start(),n++,e++,t.always(function(){e--,0===e?(n=0,u.done()):u.set((n-e)/n)}),this):this}}(),u.render=function(n){if(u.isRendered())return document.getElementById(\\\"nprogress\\\");i(document.documentElement,\\\"nprogress-busy\\\");var t=document.createElement(\\\"div\\\");t.id=\\\"nprogress\\\",t.innerHTML=c.template;var r,s=t.querySelector(c.barSelector),o=n?\\\"-100\\\":e(u.status||0),l=document.querySelector(c.parent);return f(s,{transition:\\\"all 0 linear\\\",transform:\\\"translate3d(\\\"+o+\\\"%,0,0)\\\"}),c.showSpinner||(r=t.querySelector(c.spinnerSelector),r&&a(r)),l!=document.body&&i(l,\\\"nprogress-custom-parent\\\"),l.appendChild(t),t},u.remove=function(){s(document.documentElement,\\\"nprogress-busy\\\"),s(document.querySelector(c.parent),\\\"nprogress-custom-parent\\\");var n=document.getElementById(\\\"nprogress\\\");n&&a(n)},u.isRendered=function(){return!!document.getElementById(\\\"nprogress\\\")},u.getPositioningCSS=function(){var n=document.body.style,e=\\\"WebkitTransform\\\"in n?\\\"Webkit\\\":\\\"MozTransform\\\"in n?\\\"Moz\\\":\\\"msTransform\\\"in n?\\\"ms\\\":\\\"OTransform\\\"in n?\\\"O\\\":\\\"\\\";return e+\\\"Perspective\\\"in n?\\\"translate3d\\\":e+\\\"Transform\\\"in n?\\\"translate\\\":\\\"margin\\\"};var l=function(){function n(){var t=e.shift();t&&t(n)}var e=[];return function(t){e.push(t),1==e.length&&n()}}(),f=function(){function n(n){return n.replace(/^-ms-/,\\\"ms-\\\").replace(/-([\\\\da-z])/gi,function(n,e){return e.toUpperCase()})}function e(n){var e=document.body.style;if(n in e)return n;for(var t,r=i.length,s=n.charAt(0).toUpperCase()+n.slice(1);r--;)if(t=i[r]+s,t in e)return t;return n}function t(t){return t=n(t),s[t]||(s[t]=e(t))}function r(n,e,r){e=t(e),n.style[e]=r}var i=[\\\"Webkit\\\",\\\"O\\\",\\\"Moz\\\",\\\"ms\\\"],s={};return function(n,e){var t,i,s=arguments;if(2==s.length)for(t in e)i=e[t],void 0!==i&&e.hasOwnProperty(t)&&r(n,t,i);else r(n,s[1],s[2])}}();return u});\",\"title\":\"nprogress.min.js\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/tiddlywiki-back-to-top/readme\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-back-to-top/readme\",\"text\":\"!! Tiddlywiki Back To Top\\n\\n* [[Source|https://github.com/oeyoews/neotw/tree/main/plugins/tiddlywiki-back-to-top]]\\n* [[Demo|https://oeyoews.github.io/neotw]]\\n\\n!! TOOD\\n\\n* 固定滚动到顶部的时间\\n* background with palette primary\\n\"},\"$:/plugins/oeyoews/tiddlywiki-back-top-top/back-to-top.js\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-back-top-top/back-to-top.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddlywiki-back-top-top/back-to-top.js\\ntype: application/javascript\\n// module-type: startup\\n\\nAdds a \\\"back to top\\\" button with a progress indicator to the page which allows users to quickly scroll to the top of the page.\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  if (!$tw.browser) return;\\n\\n  // Export name and synchronous status\\n  exports.name = 'back-to-top';\\n  exports.platforms = ['browser'];\\n  exports.after = ['startup'];\\n  exports.synchronous = true;\\n\\n  // Define the \\\"back to top\\\" button\\n  const svgButton = `<svg stroke=\\\"currentColor\\\" fill=\\\"currentColor\\\" stroke-width=\\\"0\\\" viewBox=\\\"0 0 24 24\\\" height=\\\"1em\\\" width=\\\"1em\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill=\\\"none\\\" d=\\\"M0 0h24v24H0z\\\"></path><path d=\\\"M8 11h3v10h2V11h3l-4-4-4 4zM4 3v2h16V3H4z\\\"></path></svg>`;\\n  // Define the amount of pixels from the top of the page at which to show the button\\n  const showButtonAt = 200;\\n\\n  // Define the function that will be called when the button is clicked\\n  function scrollToTop() {\\n    window.scrollTo({ top: 0, behavior: 'smooth' });\\n  }\\n\\n  // Create the button element and attach the click listener\\n  const button = document.createElement('div');\\n  const backToTopButton = document.createElement('button');\\n  button.id = 'oeyoews-story-top';\\n  backToTopButton.setAttribute('title', '返回到顶部');\\n  backToTopButton.className = 'back-to-top-btn';\\n  backToTopButton.innerHTML = svgButton;\\n  button.appendChild(backToTopButton);\\n  // Add a span element for the progress indicator\\n  const progressIndicator = document.createElement('span');\\n  progressIndicator.className = 'back-to-top-progress';\\n  button.appendChild(progressIndicator);\\n  backToTopButton.addEventListener('click', scrollToTop);\\n\\n  // Add the button to the page\\n  document.body.appendChild(button);\\n\\n  function backListener() {\\n    // Add a scroll event listener to show/hide the button based on the user's scroll position\\n    $tw.wiki.addEventListener('scroll', () => {\\n      if (window.scrollY > showButtonAt) {\\n        backToTopButton.classList.add('is-visible');\\n        progressIndicator.classList.add('is-visible');\\n        // Update the progress indicator\\n        const pageHeight = document.body.scrollHeight - window.innerHeight;\\n        const progress = Math.min(\\n          (window.scrollY / pageHeight) * 100,\\n          99,\\n        ).toFixed(1);\\n        progressIndicator.textContent = `${Math.round(progress)}.0%`;\\n      } else {\\n        backToTopButton.classList.remove('is-visible');\\n        progressIndicator.classList.remove('is-visible');\\n        // progressIndicator.textContent = '';\\n      }\\n    });\\n  }\\n  exports.startup = backListener;\\n})();\\n\",\"type\":\"application/javascript\",\"// module-type\":\"startup\"},\"$:/plugins/oeyoews/tiddlywiki-back-top-top/more.js\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-back-top-top/more.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddlywiki-back-top-top/more.js\\ntype: application/javascript\\n// module-type: startup\\n\\nmore\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  if (!$tw.browser) return;\\n\\n  // Export name and synchronous status\\n  exports.name = 'more';\\n  exports.platforms = ['browser'];\\n  exports.after = ['startup'];\\n  exports.synchronous = true;\\n\\n  exports.startup = moreListener;\\n})();\\n\",\"type\":\"application/javascript\",\"// module-type\":\"startup\"},\"nprogress/startup.js\":{\"title\":\"nprogress/startup.js\",\"text\":\"/*\\\\\\ntitle: nprogress/startup.js\\ntype: application/javascript\\nmodule-type: startup\\n\\nnprogress module\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  exports.name = 'nprogress-startup-hook';\\n  exports.platforms = ['browser'];\\n  exports.after = ['load-modules'];\\n  exports.synchronous = true;\\n  exports.startup = () => {\\n    window.NProgress = require('nprogress.min.js');\\n    NProgress.start();\\n    const startTime = performance.now();\\n    window.onload = function () {\\n      NProgress.done();\\n      const endTime = performance.now();\\n      const loadTime = Math.floor(endTime - startTime);\\n      console.log(`🎉 Page loaded in ${loadTime}ms`);\\n    };\\n  };\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/tiddlywiki-back-top-top/progress.js\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-back-top-top/progress.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddlywiki-back-top-top/progress.js\\ntype: application/javascript\\nmodule-type: startup\\n\\nprogress\\n\\n\\\\*/\\n// CSS-based progress bar that works on iOS devices\\n\\n// The reason why the HTML5 progress element doesn't work on iOS devices is because Safari on iOS doesn't support the progress element's JavaScript API. This means that you can't update the value of the progress bar using JavaScript, which is necessary for the progress bar to work as intended.\\n// Using a CSS - based progress bar is a workaround for this issue, because you can update the width of the progress bar using CSS instead of JavaScript.This allows the progress bar to work on iOS devices as well as other browsers.\\n(function() {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  if (!$tw.browser) return;\\n\\n  // Export name and synchronous status\\n  exports.name = 'progressbar';\\n  exports.platforms = ['browser'];\\n  exports.after = ['startup'];\\n  exports.synchronous = true;\\n\\n  const progress = document.createElement('div');\\n  progress.id = 'page-progress';\\n  const progressBar = document.createElement('div');\\n  progressBar.id = 'page-progress-bar';\\n  progress.appendChild(progressBar);\\n  document.body.appendChild(progress);\\n\\n  function progressbarListener() {\\n    window.addEventListener('scroll', function() {\\n      const pageHeight = window.document.documentElement.scrollHeight;\\n      const windowHeight = window.innerHeight;\\n\\n      const scrollTop =\\n        window.pageYOffset || document.documentElement.scrollTop;\\n      const denominator = pageHeight - windowHeight;\\n      const scrollProgress =\\n        denominator !== 0 ? (scrollTop / denominator) * 100 : 0;\\n      const progressBar = document.getElementById('page-progress-bar');\\n      progressBar.style.width = scrollProgress + '%';\\n    });\\n  }\\n\\n  exports.startup = progressbarListener;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/oeyoews/tiddlywiki-back-to-top/icon\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-back-to-top/icon\",\"text\":\"<svg stroke=\\\"currentColor\\\" fill=\\\"#aaa\\\" stroke-width=\\\"0\\\" viewBox=\\\"0 0 24 24\\\" height=\\\"1em\\\" width=\\\"1em\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill=\\\"none\\\" d=\\\"M0 0h24v24H0z\\\"></path><path d=\\\"M8 11h3v10h2V11h3l-4-4-4 4zM4 3v2h16V3H4z\\\"></path></svg>\\n\",\"type\":\"image/svg+xml\"},\"$:/plugins/oeyoews/tiddlywiki-back-to-top/style\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-back-to-top/style\",\"text\":\"/* progress number */\\n.back-to-top-progress {\\n  display: none;\\n  font-size: 14px;\\n  background: linear-gradient(45deg, #12c2e9, #c471ed, #f64f59);\\n  -webkit-background-clip: text;\\n  color: transparent;\\n}\\n\\n.back-to-top-progress.is-visible {\\n  display: flex;\\n}\\n\\n/* button */\\n#oeyoews-story-top {\\n  position: fixed;\\n  bottom: 0.1rem;\\n  right: 1rem;\\n  font-size: 24px;\\n  z-index: 899;\\n}\\n\\n#oeyoews-story-top button {\\n  opacity: 0.7;\\n  min-width: 1.5em;\\n  border: none;\\n}\\n\\n/* todo */\\n.back-to-top-btn {\\n  background-color: #00000008;\\n  border-radius: 50%;\\n  padding: 0;\\n  margin: 0;\\n  display: none;\\n  box-shadow: 0 5px 20px #0000001f;\\n}\\n\\n.back-to-top-btn.is-visible {\\n  /* background-color: red; */\\n  align-items: center;\\n  justify-content: center;\\n  display: flex;\\n  width: 40px;\\n  height: 40px;\\n  display: inline; /* inline */\\n}\\n\\n.back-to-top-btn:hover {\\n  transform: scale(1.1);\\n  transition: transform 0.2s;\\n}\\n\\n/* bar */\\n#page-progress {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  width: 100%;\\n  height: 3px;\\n  /* background-color: #ddd; */\\n  z-index: 899;\\n}\\n\\n#page-progress-bar {\\n  background: linear-gradient(135deg, #12c2e9, #ffafbd, #c9ffbf);\\n  height: 100%;\\n  background-color: #007bff;\\n  width: 0;\\n  border-radius: 9px;\\n  transition: width 0.3s ease-in-out;\\n  /* animation: progress-bar 1s ease-out infinite; */\\n}\\n\\nprogress {\\n  width: 100%;\\n  height: 4px;\\n  border-radius: 9px;\\n  overflow: hidden;\\n  -webkit-appearance: none;\\n  appearance: none;\\n}\\n\\n/* 手机端样式 */\\n@media (max-width: 767px) {\\n  .progress {\\n    height: 2px;\\n    border-radius: 4px;\\n  }\\n}\\n\\n::-webkit-progress-bar {\\n  background-color: white;\\n}\\n\\n::-webkit-progress-value {\\n  /* background: linear-gradient(to right, #007aff, #00d4ff); */\\n  background: linear-gradient(135deg, #12c2e9, #ffafbd, #c9ffbf);\\n  /* filter: brightness(0.8); */\\n  width: 50%;\\n  /* transition: width 0.5s ease; */\\n  animation: progress-bar 1s ease-out infinite;\\n}\\n\\n@keyframes progress-bar {\\n  0% {\\n    box-shadow: 0 0 1px #007aff;\\n  }\\n  50% {\\n    box-shadow: 0 0 2px #007aff;\\n  }\\n  100% {\\n    box-shadow: 0 0 1px #007aff;\\n  }\\n}\\n\\n/* nprogress */\\n#nprogress {\\n  pointer-events: none;\\n}\\n#nprogress .bar {\\n  background: #f87171;\\n  position: fixed;\\n  z-index: 1031;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 2px;\\n}\\n#nprogress .peg {\\n  display: block;\\n  position: absolute;\\n  right: 0;\\n  width: 100px;\\n  height: 100%;\\n  box-shadow: 0 0 10px #f87171, 0 0 5px #f87171;\\n  opacity: 1;\\n  -webkit-transform: rotate(3deg) translate(0, -4px);\\n  -ms-transform: rotate(3deg) translate(0, -4px);\\n  transform: rotate(3deg) translate(0, -4px);\\n}\\n#nprogress .spinner {\\n  display: block;\\n  position: fixed;\\n  z-index: 1031;\\n  top: 15px;\\n  right: 15px;\\n}\\n#nprogress .spinner-icon {\\n  width: 18px;\\n  height: 18px;\\n  box-sizing: border-box;\\n  border: 2px solid transparent;\\n  border-top-color: #f87171;\\n  border-left-color: #29d;\\n  border-radius: 50%;\\n  -webkit-animation: nprogress-spinner 400ms linear infinite;\\n  animation: nprogress-spinner 400ms linear infinite;\\n}\\n.nprogress-custom-parent {\\n  overflow: hidden;\\n  position: relative;\\n}\\n.nprogress-custom-parent #nprogress .bar,\\n.nprogress-custom-parent #nprogress .spinner {\\n  position: absolute;\\n}\\n@-webkit-keyframes nprogress-spinner {\\n  0% {\\n    -webkit-transform: rotate(0deg);\\n  }\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n  }\\n}\\n@keyframes nprogress-spinner {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n  100% {\\n    transform: rotate(360deg);\\n  }\\n}\\n\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/css\"}}}"
}